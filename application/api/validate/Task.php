<?phpnamespace app\api\validate;use app\common\model\User;use think\Validate;class Task extends Validate{    protected $rule = [        'user_id'=> 'require|checkUserExist',        'title'=> 'require',        'task_id'=> 'require',        'span'=> 'require',        'line'=> 'require',        'sound_barrier'=> 'require',        'sequence_number'=> 'require',        'catenary'=> 'require',        'anchor'=> 'require',        'cable'=> 'require',        'centralized_drainage'=> 'require',        'mould'=> 'require',    ];    protected $message = [        'user_id.require' => '用户id不能为空',        'title.require' => '任务名称不能为空',        'task_id.require' => '任务id不能为空',        'span.require' => '跨度不能为空',        'line.require' => '直曲线不能为空',        'sound_barrier.require' => '声屏障不能为空',        'sequence_number.require' => '预制顺序号不能为空',        'catenary.require' => '接触网不能为空',        'anchor.require' => '上锚拉线不能为空',        'cable.require' => '电缆上下槽不能为空',        'centralized_drainage.require' => '集中排水不能为空',        'mould.require' => '绑扎胎具不能为空',    ];    protected $scene = [        //发布指令        'add'=>[            'user_id'=>['require','checkUserExist','checkUserDepart'],            'title',            //'span',            //'line',            //'sound_barrier',            //'sequence_number',            //'catenary',            //'anchor',            //'cable',            //'centralized_drainage',            //'mould',        ],        //查看指令        'instruct'=>[            'user_id',            'task_id',        ],        //确认指令        'affirm'=>[            'user_id',            'task_id',        ],    ];    //验证用户id是否存在    protected function checkUserExist($value)    {        $user = new User();        $res = $user->where(['id'=>$value])->value('id');        if (!$res)            return '用户id不存在';        return true;    }    //验证用户部门是否正确    protected function checkUserDepart($value)    {        $user = new User();        $depart = $user->where(['id'=>$value])->value('department_id');        if ($depart != 10)            return '用户无此权限';        return true;    }}