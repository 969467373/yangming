<?phpnamespace app\common\model;use think\Db;use think\Exception;use think\Session;//终张拉通知单class FinalTension extends BaseModel{    //发布    function addTension($data)    {        $this->allowField(true)->save($data);    }    //编辑    function editTension($data)    {        $this->allowField(true)->isUpdate(true)->save($data);    }    //查看    function lookTension($task_id)    {        $data = $this ->where('task_id',$task_id)            ->field([                'id',                'task_id',                'title',                'serial_number',                'bridge_number',                'produced_time',                'experiment_time',                'vintage',                'design_strength',                'final_strength',                'design_film',                'final_film',                'conclusion',                'user_id',                'create_time',                'technologist_id',                'technologist_time',                'prestress_id',                'prestress_time',            ])            ->find();        if (empty($data))            return false;        $data['name'] = Db::name('user')->where('id',$data['user_id'])->value('name');        $data['technologist_name'] = Db::name('user')->where('id',$data['technologist_id'])->value('name');        $data['prestress_name'] = Db::name('user')->where('id',$data['prestress_id'])->value('name');        return $data;    }}